<template name="nav">
	<div class="ui inverted menu" id="desktopNav">
		<div class="ui container">
			<a href="{{getRoutePath 'home'}}" id="brandHeader" class="header item">
			  Acrofever
			</a>
			<a href="#" class="item playNow">
				<i class="lightning icon"></i>
				<span class="hiddenOnTablet">Play now</span>
			</a>
			<a href="{{getRoutePath 'play'}}" class="item {{#if isOnRoute 'play'}}active{{/if}}">
				<i class="search icon"></i>
				<span class="hiddenOnTablet">Find a lobby</span>
			</a>
			<a href="{{getRoutePath 'halloffame'}}" class="item {{#if isOnRoute 'halloffame'}}active{{/if}}">
				<i class="trophy icon"></i>
				<span class="hiddenOnTablet">Hall of Fame</span>
			</a>
			<a id="howToPlay" class="item">
				<i class="question icon"></i>
				<span class="hiddenOnTablet">How to Play</span>
			</a>
			<a href="{{getRoutePath 'blogIndex'}}" class="item {{#if isOnRoute 'blogIndex'}}active{{/if}}">
				<i class="rss icon"></i>
				<span class="hiddenOnTablet">Blog</span>
			</a>
			<div id="rightNav" class="right menu">
				{{#if loggedInUser}}
					{{#with loggedInUser}}
						{{> userNavDropdown}}
					{{/with}}
				{{else}}
					<a href="/sign-in" class="item">
						<i class="sign in icon"></i>
						Sign in / Register
					</a>
				{{/if}}
			</div>
		</div>
	</div>
	<div id="mobileNav">
		<div class="ui inverted menu">
			<a href="{{getRoutePath 'home'}}" id="brandHeader" class="header item">
			  Acrofever
			</a>
			<div id="rightNav" class="right menu">
				<h2 class="header item">
					<i class="sidebar icon" style="margin-right:0"></i>
				</h2>
			</div>
		</div>
		<div class="slideMenu">
			<div class="ui inverted stackable menu">
				<a href="#" class="item playNow">
					<i class="lightning icon"></i>
					Play now
				</a>
				<a href="{{getRoutePath 'play'}}" class="item {{#if isOnRoute 'play'}}active{{/if}}">
					<i class="search icon"></i>
					Find a lobby
				</a>
				<a href="{{getRoutePath 'halloffame'}}" class="item {{#if isOnRoute 'halloffame'}}active{{/if}}">
					<i class="trophy icon"></i>
					Hall of Fame
				</a>
				<a id="howToPlay" class="item">
					<i class="question icon"></i>
					How to Play
				</a>
				<a href="{{getRoutePath 'blogIndex'}}" class="item {{#if isOnRoute 'blogIndex'}}active{{/if}}">
					<i class="rss icon"></i>
					Blog
				</a>
				{{#if loggedInUser}}
					{{#with loggedInUser}}
						{{> userNavDropdown}}
					{{/with}}
				{{else}}
					<a href="/sign-in" class="item">
						<i class="sign in icon"></i>
						Sign in / Register
					</a>
				{{/if}}
			</div>
		</div>
	</div>
</template>

<template name="userNavDropdown">
	<a id="toggleSound" class="hiddenOnMobile item" style="font-size:1.2em;padding-left:10px;padding-right:10px" title="Toggle audio">
		{{#unless soundDisabled}}
			<i class="volume up icon" style="margin-right:0"></i>
		{{else}}
			<i class="volume off icon" style="margin-right:0"></i>
		{{/unless}}
	</a>
	{{#if notificationsSupported}}
		{{#if notificationsEnabled}}
			<a id="turnOffNotifications" class="hiddenOnMobile item" style="font-size:1.2em;padding-left:10px;padding-right:10px" title="Toggle notifications">
				<i class="alarm icon" style="margin-right:0"></i>
			</a>
		{{else}}
			<a id="turnOnNotifications" class="hiddenOnMobile item" style="font-size:1.2em;padding-left:10px;padding-right:10px" title="Toggle notifications">
				<i class="alarm slash icon" style="margin-right:0"></i>
			</a>
		{{/if}}
	{{/if}}
	<div class="ui dropdown item">
		<img class="ui avatar image" src="{{profilePicture _id 30}}" style="margin-right:10px">
		<span>{{username _id}}</span>
		<i class="dropdown icon"></i>
		<div class="menu">
			<a id="toggleSound" class="showOnMobile item">
				{{#unless soundDisabled}}
					<i class="volume up icon"></i> Turn off audio
				{{else}}
					<i class="volume off icon"></i> Turn on audio
				{{/unless}}
			</a>
			{{#if notificationsSupported}}
				{{#if notificationsEnabled}}
					<a id="turnOffNotifications" class="showOnMobile item">
						<i class="alarm icon"></i> Turn off notifications
					</a>
				{{else}}
					<a id="turnOnNotifications" class="showOnMobile item">
						<i class="alarm slash icon"></i> Turn on notifications
					</a>
				{{/if}}
			{{/if}}
			<a href="/change-password" class="item">Change password</a>
			<a id="signOut" class="item">Sign out</a>
		</div>
	</div>
</template>